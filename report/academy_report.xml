<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

<template id="template_report_estudiante">
    <t t-call="report.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="report.external_layout">
                <div class="page">
                <br/>
                <h2>
                    <span t-field="o.name" />
                    <span t-field="o.matricula" />
                    <br/>
                    <span t-field="o.fotografia" t-field-options="{&quot;widget&quot;: &quot;image&quot;}"/>
                </h2>
                <table class="table table-condensed">
                    <thead>
                        <tr>
                            <th>Escuela</th>
                            <th>Matricula</th>
                            <th>Fecha</th>
                        </tr>
                    </thead>
                    <tbody>
                <tr >
                    <td>
                       <p></p>
                       <span t-field="o.escuela_id.name"/>
                       <p></p>
                    </td>
                    <td>
                       <p></p>
                       <span t-field="o.matricula"/>
                       <p></p>
                    </td>
                    <td>
                       <p></p>
                       <span t-field="o.fecha"/>
                       <p></p>
                    </td>
                </tr>
                    </tbody>
                </table>
                <h2>
                    Calificaciones:
                </h2>
                <table class="table table-condensed">
                    <thead>
                        <tr>
                            <th>Materia</th>
                            <th>Maestro</th>
                            <th>Calificacion</th>
                        </tr>
                    </thead>
                    <tbody>
                <tr t-foreach="o.calificaciones_ids" t-as="l">
                    <td>
                       <p></p>
                       <span t-field="l.name.name"/>
                       <p></p>
                    </td>
                    <td>
                       <p></p>
                       <span t-field="l.materia.name"/>
                       <p></p>
                    </td>
                    <td>
                       <p></p>
                       <span t-field="l.calificacion"/>
                       <p></p>
                    </td>
                </tr>
                    </tbody>
                </table>
            </div>
            </t>
        </t>
    </t>
</template>


<report 
    id="report_users"
    string="Reporte Estudiante"
    model="academy.estudiante" 
    report_type="qweb-pdf"
    file="academy.template_report_estudiante" 
    name="academy.template_report_estudiante"
/>

<!-- <report 
    id="report_users"
    string="Reporte Estudiante"
    model="academy.estudiante" 
    report_type="qweb-pdf"
    file="academy.template_report_estudiante" 
    name="academy.template_report_estudiante"
    attachment_use="True"
    attachment="((object.state in ('inscrito','finalizado')) and ((object.escuela_id.name) + '_' + (object.matricula or '')+'_'+(object.name))  +'.pdf')"
    header="False"
/> -->

    </data>
</openerp>